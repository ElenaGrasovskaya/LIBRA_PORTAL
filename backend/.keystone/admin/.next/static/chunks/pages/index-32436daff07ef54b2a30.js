_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{"1H5k":function(e,t,n){"use strict";var r=n("x8tt");n.o(r,"gql")&&n.d(t,"gql",(function(){return r.gql})),n.o(r,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return r.useApolloClient})),n.o(r,"useMutation")&&n.d(t,"useMutation",(function(){return r.useMutation})),n.o(r,"useQuery")&&n.d(t,"useQuery",(function(){return r.useQuery}))},Ax7X:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return S}));var r=n("cxan"),o=n("J8OT"),a=n("ERkP"),c=n.n(a),i=n("HbGN"),s=n("BO4l"),l=n("rkyN"),u=n("ALBq"),d=n("RxMK"),b=n("d01W"),g=n("rjhH"),O=n("3jXu"),j=n("q9nS"),p=n("UgQ6"),m=n.n(p),f=n("4/oc");const h=()=>{var e;const{headingStyles:t}=Object(o.t)(),{adminConfig:n}=Object(O.b)();return null!==(e=n.components)&&void 0!==e&&e.Logo?Object(o.n)(n.components.Logo,null):Object(o.n)(o.f,null,Object(o.n)(m.a,{href:"/",passHref:!0},Object(o.n)("a",{css:{color:t.h3.color,textDecoration:"none"}},"KeystoneJS")))},y=({href:e,children:t})=>{const{palette:n,spacing:r,radii:a,typography:c}=Object(o.t)(),i=Object(s.useRouter)(),l=i.pathname===e||i.pathname.split("/")[1]===e.split("/")[1];return Object(o.n)(j.a,{"aria-current":!!l&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:a.xsmall,borderTopRightRadius:a.xsmall,color:n.neutral700,display:"block",fontWeight:c.fontWeight.medium,marginBottom:r.xsmall,marginRight:r.xlarge,padding:`${r.small}px ${r.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:n.blue50,color:n.blue500},"&[aria-current=location]":{background:n.neutral200,color:n.neutral900}}},t)},v=({item:e})=>{const{spacing:t,typography:n}=Object(o.t)();return Object(o.n)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:t.xlarge}},Object(o.n)("div",{css:{fontSize:n.fontSize.small}},"Signed in as ",Object(o.n)("strong",null,e.label)),Object(o.n)(u.a,{placement:"bottom",triggerRenderer:({triggerProps:e})=>Object(o.n)(l.a,Object(r.a)({size:"small",style:{padding:0,width:36},"aria-label":"Links and signout"},e),Object(o.n)(d.a,null))},Object(o.n)(o.j,{gap:"medium",padding:"large",dividers:"between"},Object(o.n)(x,{target:"_blank",href:"/api/graphql"},"API Explorer"),Object(o.n)(x,{target:"_blank",href:"https://github.com/keystonejs/keystone"},"GitHub Repository"),Object(o.n)(x,{target:"_blank",href:"https://www.keystonejs.com/documentation"},"Keystone Documentation"),Object(o.n)(g.a,null))))},x=e=>{let{children:t}=e,n=Object(i.a)(e,["children"]);const{typography:a}=Object(o.t)();return Object(o.n)("a",Object(r.a)({css:{alignItems:"center",display:"flex",fontSize:a.fontSize.small,textDecoration:"none"}},n),t,Object(o.n)(b.a,{size:"small"}))},k=()=>{const{adminMeta:{lists:e},authenticatedItem:t,visibleLists:n}=Object(O.b)();return Object(o.n)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center"}},"authenticated"===t.state&&Object(o.n)(v,{item:t}),Object(o.n)("nav",null,Object(o.n)(y,{href:"/"},"Dashboard"),"loading"===n.state?null:"error"===n.state?Object(o.n)("span",{css:{color:"red"}},n.error instanceof Error?n.error.message:n.error[0].message):Object.keys(e).map(t=>{if(!n.lists.has(t))return null;const r=e[t];return Object(o.n)(y,{key:t,href:"/"+r.path},e[t].label)})))},w=80,E=e=>Object(o.n)(a.Fragment,null,Object(o.n)("style",null,"body { overflow: hidden; }"),Object(o.n)("div",Object(r.a)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:w+"px auto",height:"100vh"}},e))),C=e=>Object(o.n)("aside",Object(r.a)({css:{minWidth:0,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e)),R=e=>{const{colors:t,spacing:n}=Object(o.t)();return Object(o.n)("main",Object(r.a)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e))},S=({children:e,header:t})=>{const{colors:n,spacing:r}=Object(o.t)();return Object(o.n)(E,null,Object(o.n)("div",{css:{alignItems:"center",borderBottom:"1px solid "+n.border,display:"flex",justifyContent:"space-between",paddingLeft:r.xlarge,paddingRight:r.xlarge}},Object(o.n)(h,null)),Object(o.n)("header",{css:{alignItems:"center",backgroundColor:n.background,borderBottom:"1px solid "+n.border,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:r.xlarge,paddingRight:r.xlarge}},t),Object(o.n)(C,null,Object(o.n)(k,null)),Object(o.n)(R,null,e))};function P({errors:e,networkError:t}){return t?c.a.createElement(f.a,{tone:"negative"},t.message):null!==e&&void 0!==e&&e.length?c.a.createElement(o.j,{gap:"small"},e.map(e=>{var t,n;const r=e;return"ValidationFailureError"===e.name&&null!==(t=r.data)&&void 0!==t&&null!==(n=t.messages)&&void 0!==n&&n.length?r.data.messages.map(e=>c.a.createElement(f.a,{tone:"negative"},e)):c.a.createElement(f.a,{tone:"negative"},e.message)})):null}},RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var r=n("ERkP"),o=n.n(r),a=n("cxan"),c=n("J8OT"),i=n("eecF"),s=(n("97Jx"),n("m3Bd"),n("s3d4"));const l=Object(s.a)(Object(r.createElement)(r.Fragment,null,Object(r.createElement)("line",{x1:12,y1:5,x2:12,y2:19}),Object(r.createElement)("line",{x1:5,y1:12,x2:19,y2:12})),"PlusIcon");var u=n("olln"),d=n("+C6t"),b=n("ZP4Z"),g=n("Ax7X"),O=n("x8tt"),j=n("3jXu"),p=n("q9nS"),m=n("BO4l");n("yiKp"),n("b2e3"),n("yTkC"),n("rkyN"),n("ALBq"),n("RxMK"),n("d01W"),n("rjhH"),n("UgQ6"),n("4/oc"),n("yUr7"),n("z3d9"),n("6tix");const f=({listKey:e,count:t})=>{const{colors:n,palette:o,radii:a,spacing:i}=Object(c.t)(),s=Object(j.c)(e),[g,O]=Object(r.useState)(!1),f=Object(m.useRouter)();return Object(c.n)("div",{css:{position:"relative"}},Object(c.n)(p.a,{href:s.path,css:{backgroundColor:n.background,borderColor:n.border,borderRadius:a.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:i.large,textDecoration:"none",":hover":{borderColor:o.blue400},":hover h3":{textDecoration:"underline"}}},Object(c.n)("h3",{css:{margin:`0 0 ${i.small}px 0`}},s.label," "),"success"===t.type?Object(c.n)("span",{css:{color:n.foreground,textDecoration:"none"}},t.count," item",1!==t.count?"s":""):"error"===t.type?t.message:"loading"===t.type?Object(c.n)(d.a,{label:"Loading count of "+s.plural,size:"small",tone:"passive"}):"No access"),Object(c.n)(h,{disabled:g,onClick:()=>{O(!0)}},Object(c.n)(l,{size:"large"}),Object(c.n)(c.l,null,"Create ",s.singular)),Object(c.n)(u.c,{isOpen:g},Object(c.n)(b.a,{listKey:s.key,onCreate:({id:e})=>{f.push(`/${s.path}/${e}`)},onClose:()=>{O(!1)}})))},h=e=>{const t=Object(c.t)();return Object(c.n)("button",Object(a.a)({css:{alignItems:"center",backgroundColor:t.palette.neutral400,border:0,borderRadius:t.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:t.spacing.large,top:t.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{backgroundColor:t.tones.positive.fill[0]}}},e))},y=({query:e})=>{const{adminMeta:{lists:t},visibleLists:n}=Object(j.b)();let{data:r,error:o}=Object(O.useQuery)(e,{errorPolicy:"all"});const a=Object(i.d)(r,null===o||void 0===o?void 0:o.graphQLErrors);return Object(c.n)(g.c,{header:Object(c.n)(c.g,{type:"h3"},"Dashboard")},"loading"===n.state?Object(c.n)(c.b,{css:{height:`calc(100vh - ${g.b}px)`}},Object(c.n)(d.a,{label:"Loading lists",size:"large",tone:"passive"})):Object(c.n)(c.h,{gap:"large",paddingY:"xlarge"},"error"===n.state?Object(c.n)("span",{css:{color:"red"}},n.error instanceof Error?n.error.message:n.error[0].message):Object.keys(t).map(e=>{var t;if(!n.lists.has(e))return null;const o=a.get(e);return"You do not have access to this resource"===(null===(t=o.errors)||void 0===t?void 0:t[0].message)?Object(c.n)(f,{count:{type:"no-access"},key:e,listKey:e}):Object(c.n)(f,{count:r?o.errors?{type:"error",message:o.errors[0].message}:{type:"success",count:r[e].count}:{type:"loading"},key:e,listKey:e})})))};var v=n("1H5k");function x(){return o.a.createElement(y,{query:v.gql`
        query {
          keystone {
            adminMeta {
              lists {
                key
                fields {
                  path
                  createView {
                    fieldMode
                  }
                }
              }
            }
          }
          User: _allUsersMeta {
            count
          }
          Item: _allItemsMeta {
            count
          }
          Order: _allOrdersMeta {
            count
          }
        }
      `})}},RxMK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ERkP"),o=(n("97Jx"),n("m3Bd"),n("J8OT"),n("s3d4"));const a=Object(o.a)(Object(r.createElement)(r.Fragment,null,Object(r.createElement)("circle",{cx:12,cy:12,r:1}),Object(r.createElement)("circle",{cx:19,cy:12,r:1}),Object(r.createElement)("circle",{cx:5,cy:12,r:1})),"MoreHorizontalIcon")},S9sh:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])},ZP4Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("Czhu"),o=n("ERkP"),a=n("b2e3"),c=n.n(a),i=n("J8OT"),s=n("olln"),l=n("yTkC"),u=n("+C6t"),d=n("x8tt"),b=n("3jXu"),g=n("Ax7X");function O({listKey:e,onClose:t,onCreate:n}){const{createViewFieldModes:a}=Object(b.b)(),O=Object(b.c)(e),j=Object(l.b)(),[p,{loading:m,error:f}]=Object(d.useMutation)(d.gql`mutation($data: ${O.gqlNames.createInputName}!) {
      item: ${O.gqlNames.createMutationName}(data: $data) {
        id
        label: ${O.labelField}
    }
  }`),[h,y]=Object(o.useState)(()=>{const e={};return Object.keys(O.fields).forEach(t=>{e[t]=O.fields[t].controller.defaultValue}),e}),v=Object(o.useMemo)(()=>{const e=new Set;return Object.keys(h).forEach(t=>{const n=h[t],r=O.fields[t].controller.validate;if(r){!1===r(n)&&e.add(t)}}),e},[O,h]),[x,k]=Object(o.useState)(!1),w=Object.keys(O.fields).filter(t=>"loaded"===a.state&&"hidden"!==a.lists[e][t]).map((e,t)=>{const n=O.fields[e];return Object(i.n)(n.views.Field,{key:e,field:n.controller,value:h[e],forceValidation:x&&v.has(e),onChange:t=>{y(Object(r.a)(Object(r.a)({},h),{},{[e]:t}))},autoFocus:0===t})});return Object(i.n)(s.b,{title:"Create "+O.singular,width:"wide",actions:{confirm:{label:"Create "+O.singular,loading:m,action:()=>{const e=0!==v.size;if(k(e),e)return;const t={};Object.keys(O.fields).forEach(e=>{const{controller:n}=O.fields[e],r=n.serialize(h[e]);c()(r,n.serialize(n.defaultValue))||Object.assign(t,r)}),p({variables:{data:t}}).then(({data:e})=>{const t=e.item.label||e.item.id;n({id:e.item.id,label:t}),j.addToast({title:t,message:"Created Successfully",tone:"positive"})}).catch(()=>{})}},cancel:{label:"Cancel",action:t}}},"error"===a.state&&Object(i.n)(g.a,{networkError:a.error instanceof Error?a.error:void 0,errors:a.error instanceof Error?void 0:a.error}),"loading"===a.state&&Object(i.n)(u.a,{label:"Loading create form"}),f&&Object(i.n)(g.a,{networkError:null===f||void 0===f?void 0:f.networkError,errors:null===f||void 0===f?void 0:f.graphQLErrors}),Object(i.n)(i.j,{gap:"xlarge",paddingY:"xlarge"},w,0===w.length&&"There are no fields that you can read or edit"))}},d01W:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ERkP"),o=(n("97Jx"),n("m3Bd"),n("J8OT"),n("s3d4"));const a=Object(o.a)(Object(r.createElement)("polyline",{points:"9 18 15 12 9 6"}),"ChevronRightIcon")},rjhH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("J8OT"),o=n("rkyN"),a=n("ERkP"),c=n("x8tt");const i=c.gql`
  mutation EndSession {
    endSession
  }
`,s=({children:e})=>{const[t,{loading:n,data:s}]=Object(c.useMutation)(i);return Object(a.useEffect)(()=>{null!==s&&void 0!==s&&s.endSession&&window.location.reload()},[s]),Object(r.n)(o.a,{size:"small",isLoading:n,onClick:()=>t()},e||"Sign out")}},yiKp:function(e,t,n){var r=n("KEM+");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}},[["S9sh",0,1,2,3,4]]]);