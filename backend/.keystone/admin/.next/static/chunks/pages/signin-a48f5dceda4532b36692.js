_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"1H5k":function(e,t,n){"use strict";var i=n("x8tt");n.o(i,"gql")&&n.d(t,"gql",(function(){return i.gql})),n.o(i,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return i.useApolloClient})),n.o(i,"useMutation")&&n.d(t,"useMutation",(function(){return i.useMutation})),n.o(i,"useQuery")&&n.d(t,"useQuery",(function(){return i.useQuery}))},DB6d:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var i=n("ERkP"),a=n.n(i),o=n("1H5k"),u=n("Czhu"),r=n("J8OT"),c=n("rkyN"),s=n("J3Wx"),d=n("4/oc"),l=n("pfvO"),g=n("3jXu"),b=n("q9nS");const m=({identityField:e,secretField:t,mutationName:n,successTypename:a,failureTypename:m})=>{var p,j;const h=o.gql`
    mutation($identity: String!, $secret: String!) {
      authenticate: ${n}(${e}: $identity, ${t}: $secret) {
        ... on ${a} {
          item {
            id
          }  
        }
        ... on ${m} {
          message
        }
      }
    }
  `,[O,f]=Object(i.useState)("signin"),[v,y]=Object(i.useState)({identity:"",secret:""}),w=Object(i.useRef)(null);Object(i.useEffect)(()=>{var e;null===(e=w.current)||void 0===e||e.focus()},[O]);const[_,{error:k,loading:E,data:q}]=Object(o.useMutation)(h),S=Object(g.e)(),C=Object(b.b)(),$=Object(g.d)();return Object(i.useEffect)(()=>{"authenticated"===$.authenticatedItem.state&&C.push(C.query.from||"/")},[$.authenticatedItem,C.query.from]),Object(r.n)(l.a,null,Object(r.n)(r.j,{gap:"xlarge",as:"form",onSubmit:async e=>{if(e.preventDefault(),"signin"===O){try{var t;if((null===(t=(await _({variables:{identity:v.identity,secret:v.secret}})).data.authenticate)||void 0===t?void 0:t.__typename)!==a)return}catch(n){return}S(),C.push(C.query.from||"/")}}},Object(r.n)(r.e,null,"Sign In"),k&&Object(r.n)(d.a,{title:"Error",tone:"negative"},k.message),(null===q||void 0===q||null===(p=q.authenticate)||void 0===p?void 0:p.__typename)===m&&Object(r.n)(d.a,{title:"Error",tone:"negative"},null===q||void 0===q?void 0:q.authenticate.message),Object(r.n)(r.j,{gap:"medium"},Object(r.n)(s.i,{name:"identity",value:v.identity,onChange:e=>y(Object(u.a)(Object(u.a)({},v),{},{identity:e.target.value})),placeholder:"Email Address",ref:w}),"signin"===O&&Object(r.n)(s.i,{name:"password",value:v.secret,onChange:e=>y(Object(u.a)(Object(u.a)({},v),{},{secret:e.target.value})),placeholder:"password",type:"password"})),"forgot password"===O?Object(r.n)(r.j,{gap:"medium",across:!0},Object(r.n)(c.a,{type:"submit",weight:"bold",tone:"active"},"Log reset link"),Object(r.n)(c.a,{weight:"none",tone:"active",onClick:()=>f("signin")},"Go back")):Object(r.n)(r.j,{gap:"medium",across:!0},Object(r.n)(c.a,{weight:"bold",tone:"active",isLoading:E||(null===q||void 0===q||null===(j=q.authenticate)||void 0===j?void 0:j.__typename)===a,type:"submit"},"Sign In"),Object(r.n)(c.a,{weight:"none",tone:"active",onClick:()=>f("forgot password")},"Forgot your password?"))))};function p(){return a.a.createElement(m,{identityField:"email",secretField:"password",mutationName:"authenticateUserWithPassword",successTypename:"UserAuthenticationWithPasswordSuccess",failureTypename:"UserAuthenticationWithPasswordFailure"})}},jgqZ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n("DB6d")}])},pfvO:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("J8OT");const a=({children:e})=>{const{colors:t,shadow:n}=Object(i.t)();return Object(i.n)(i.b,{css:{minWidth:"100vw",minHeight:"100vh",backgroundColor:t.backgroundMuted},rounding:"medium"},Object(i.n)(i.a,{css:{background:t.background,minWidth:600,boxShadow:n.s100},margin:"medium",padding:"xlarge",rounding:"medium"},e))}}},[["jgqZ",0,1,2,3,4,5]]]);