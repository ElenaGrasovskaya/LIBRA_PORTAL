(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{"/U4Q":function(e,t){function n(){return new DOMException("The request is not allowed","NotAllowedError")}e.exports=async function(e){try{await async function(e){if(!navigator.clipboard)throw n();return navigator.clipboard.writeText(e)}(e)}catch(t){try{await async function(e){const t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);const o=window.getSelection(),a=window.document.createRange();o.removeAllRanges(),a.selectNode(t),o.addRange(a);let r=!1;try{r=window.document.execCommand("copy")}finally{o.removeAllRanges(),window.document.body.removeChild(t)}if(!r)throw n()}(e)}catch(o){throw o||t||n()}}}},Ax7X:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return R}));var o=n("cxan"),a=n("J8OT"),r=n("ERkP"),i=n.n(r),l=n("HbGN"),c=n("BO4l"),s=n("rkyN"),d=n("ALBq"),u=n("RxMK"),b=n("d01W"),p=n("rjhH"),g=n("3jXu"),m=n("q9nS"),O=n("UgQ6"),j=n.n(O),f=n("4/oc");const h=()=>{var e;const{headingStyles:t}=Object(a.t)(),{adminConfig:n}=Object(g.b)();return null!==(e=n.components)&&void 0!==e&&e.Logo?Object(a.n)(n.components.Logo,null):Object(a.n)(a.f,null,Object(a.n)(j.a,{href:"/",passHref:!0},Object(a.n)("a",{css:{color:t.h3.color,textDecoration:"none"}},"KeystoneJS")))},v=({href:e,children:t})=>{const{palette:n,spacing:o,radii:r,typography:i}=Object(a.t)(),l=Object(c.useRouter)(),s=l.pathname===e||l.pathname.split("/")[1]===e.split("/")[1];return Object(a.n)(m.a,{"aria-current":!!s&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:r.xsmall,borderTopRightRadius:r.xsmall,color:n.neutral700,display:"block",fontWeight:i.fontWeight.medium,marginBottom:o.xsmall,marginRight:o.xlarge,padding:`${o.small}px ${o.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:n.blue50,color:n.blue500},"&[aria-current=location]":{background:n.neutral200,color:n.neutral900}}},t)},y=({item:e})=>{const{spacing:t,typography:n}=Object(a.t)();return Object(a.n)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:t.xlarge}},Object(a.n)("div",{css:{fontSize:n.fontSize.small}},"Signed in as ",Object(a.n)("strong",null,e.label)),Object(a.n)(d.a,{placement:"bottom",triggerRenderer:({triggerProps:e})=>Object(a.n)(s.a,Object(o.a)({size:"small",style:{padding:0,width:36},"aria-label":"Links and signout"},e),Object(a.n)(u.a,null))},Object(a.n)(a.j,{gap:"medium",padding:"large",dividers:"between"},Object(a.n)(x,{target:"_blank",href:"/api/graphql"},"API Explorer"),Object(a.n)(x,{target:"_blank",href:"https://github.com/keystonejs/keystone"},"GitHub Repository"),Object(a.n)(x,{target:"_blank",href:"https://www.keystonejs.com/documentation"},"Keystone Documentation"),Object(a.n)(p.a,null))))},x=e=>{let{children:t}=e,n=Object(l.a)(e,["children"]);const{typography:r}=Object(a.t)();return Object(a.n)("a",Object(o.a)({css:{alignItems:"center",display:"flex",fontSize:r.fontSize.small,textDecoration:"none"}},n),t,Object(a.n)(b.a,{size:"small"}))},w=()=>{const{adminMeta:{lists:e},authenticatedItem:t,visibleLists:n}=Object(g.b)();return Object(a.n)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center"}},"authenticated"===t.state&&Object(a.n)(y,{item:t}),Object(a.n)("nav",null,Object(a.n)(v,{href:"/"},"Dashboard"),"loading"===n.state?null:"error"===n.state?Object(a.n)("span",{css:{color:"red"}},n.error instanceof Error?n.error.message:n.error[0].message):Object.keys(e).map(t=>{if(!n.lists.has(t))return null;const o=e[t];return Object(a.n)(v,{key:t,href:"/"+o.path},e[t].label)})))},k=80,E=e=>Object(a.n)(r.Fragment,null,Object(a.n)("style",null,"body { overflow: hidden; }"),Object(a.n)("div",Object(o.a)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:k+"px auto",height:"100vh"}},e))),S=e=>Object(a.n)("aside",Object(o.a)({css:{minWidth:0,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e)),C=e=>{const{colors:t,spacing:n}=Object(a.t)();return Object(a.n)("main",Object(o.a)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e))},R=({children:e,header:t})=>{const{colors:n,spacing:o}=Object(a.t)();return Object(a.n)(E,null,Object(a.n)("div",{css:{alignItems:"center",borderBottom:"1px solid "+n.border,display:"flex",justifyContent:"space-between",paddingLeft:o.xlarge,paddingRight:o.xlarge}},Object(a.n)(h,null)),Object(a.n)("header",{css:{alignItems:"center",backgroundColor:n.background,borderBottom:"1px solid "+n.border,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:o.xlarge,paddingRight:o.xlarge}},t),Object(a.n)(S,null,Object(a.n)(w,null)),Object(a.n)(C,null,e))};function D({errors:e,networkError:t}){return t?i.a.createElement(f.a,{tone:"negative"},t.message):null!==e&&void 0!==e&&e.length?i.a.createElement(a.j,{gap:"small"},e.map(e=>{var t,n;const o=e;return"ValidationFailureError"===e.name&&null!==(t=o.data)&&void 0!==t&&null!==(n=t.messages)&&void 0!==n&&n.length?o.data.messages.map(e=>i.a.createElement(f.a,{tone:"negative"},e)):i.a.createElement(f.a,{tone:"negative"},e.message)})):null}},BKoc:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("HbGN"),a=n("cxan"),r=n("ERkP");function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e,t){"object"===i(e)&&null!==e&&(e.current=t),"function"===typeof e&&e(t)},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){return l(t,e)}))}},s=n("J8OT"),d=n("ALBq");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g=({children:e,content:t,hideOnClick:n=!0,placement:o="top",weight:i="bold"})=>{const{spacing:l}=Object(s.t)(),u="bold"===i,{isOpen:b,setOpen:p,trigger:g,dialog:O,arrow:j}=Object(d.c)({placement:o,modifiers:[{name:"offset",options:{offset:[0,u?l.small:l.xsmall]}}]}),f=Object(s.r)(),h=Object(r.useCallback)(()=>p(!0),[]),v=Object(r.useCallback)(()=>p(!1),[]),y=Object(r.useRef)(null);return Object(r.useEffect)(()=>{const e=y.current;if(n&&e)return e.addEventListener("click",v),()=>e.removeEventListener("click",v)},[b]),Object(s.n)(r.Fragment,null,Object(r.useMemo)(()=>e({onMouseEnter:h,onMouseLeave:v,onFocus:h,onBlur:v,"aria-describedby":f,ref:c(g.ref,y)}),[e,h,v,f,g.ref,y]),Object(s.n)(m,Object(a.a)({id:f,isVisible:b,weight:i,ref:O.ref},O.props,{arrow:"bold"===i?j:void 0}),t))},m=Object(r.memo)(Object(r.forwardRef)((e,t)=>{let{isVisible:n,children:r,arrow:i,weight:l}=e,c=Object(o.a)(e,["isVisible","children","arrow","weight"]);const d="bold"===l,{elevation:u,radii:b,colors:g,spacing:m,typography:j}=Object(s.t)(),f=O();return Object(s.n)(s.i,null,Object(s.n)("div",Object(a.a)({role:"tooltip","aria-hidden":!n,ref:t,css:p({backgroundColor:g.foregroundMuted,borderRadius:b.xsmall,color:g.background,fontSize:d?j.fontSize.small:j.fontSize.xsmall,fontWeight:j.fontWeight.medium,lineHeight:j.leading.tight,maxWidth:320,opacity:n?d?1:.9:0,padding:d?`${m.small}px ${m.medium}px`:`${m.xsmall}px ${m.small}px`,pointerEvents:n?void 0:"none",zIndex:u.e500},f)},c),r,i&&Object(s.n)("div",Object(a.a)({"data-popper-arrow":!0,ref:i.ref,className:"tooltipArrow"},i.props))))})),O=()=>{const{colors:e}=Object(s.t)();return{".tooltipArrow":{position:"absolute",overflow:"hidden",pointerEvents:"none",height:"20px",width:"20px","&::after":{content:"close-quote",position:"absolute",width:"10px",height:"10px",backgroundColor:e.foregroundMuted,transform:"translateX(-50%) translateY(-50%) rotate(45deg)"}},"&[data-popper-placement^='left'] > .tooltipArrow":{left:"100%","&::after":{top:"50%",left:"0"}},"&[data-popper-placement^='right'] > .tooltipArrow":{right:"100%","&::after":{top:"50%",left:"100%"}},"&[data-popper-placement^='top'] > .tooltipArrow":{top:"100%","&::after":{top:0,bottom:"-50%",left:"50%"}},"&[data-popper-placement^='bottom'] > .tooltipArrow":{bottom:"100%",right:"unset","&::after":{bottom:"-50%",left:"50%"}}}}},RxMK:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ERkP"),a=(n("97Jx"),n("m3Bd"),n("J8OT"),n("s3d4"));const r=Object(a.a)(Object(o.createElement)(o.Fragment,null,Object(o.createElement)("circle",{cx:12,cy:12,r:1}),Object(o.createElement)("circle",{cx:19,cy:12,r:1}),Object(o.createElement)("circle",{cx:5,cy:12,r:1})),"MoreHorizontalIcon")},d01W:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ERkP"),a=(n("97Jx"),n("m3Bd"),n("J8OT"),n("s3d4"));const r=Object(a.a)(Object(o.createElement)("polyline",{points:"9 18 15 12 9 6"}),"ChevronRightIcon")},pVO8:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var o=n("cxan"),a=n("/U4Q"),r=n.n(a),i=n("UgQ6"),l=n.n(i),c=n("BO4l"),s=n("ERkP"),d=n("rkyN"),u=n("J8OT"),b=n("+C6t"),p=(n("97Jx"),n("m3Bd"),n("s3d4"));const g=Object(p.a)(Object(s.createElement)(s.Fragment,null,Object(s.createElement)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),Object(s.createElement)("rect",{x:8,y:2,width:8,height:4,rx:1,ry:1})),"ClipboardIcon");var m=n("d01W"),O=n("olln"),j=n("4/oc"),f=n("yTkC"),h=n("BKoc"),v=n("J3Wx"),y=n("eecF"),x=n("x8tt"),w=n("3jXu"),k=n("Ax7X"),E=(n("yiKp"),n("b2e3"),n("HbGN"));n("yUr7"),n("z3d9"),n("6tix"),n("ALBq"),n("RxMK"),n("rjhH"),n("q9nS");const S=e=>{let{children:t}=e,n=Object(E.a)(e,["children"]);return Object(u.n)("div",Object(o.a)({css:{minWidth:0,maxWidth:1080}},n),t)};function C(e){const t=Object(s.useRef)(e),n=Object(s.useCallback)((...e)=>t.current(...e),[]);return Object(s.useEffect)(()=>{t.current=e}),n}function R({listKey:e,itemGetter:t,selectedFields:n,fieldModes:o,showDelete:a}){var r,i,l;const c=Object(w.c)(e),[d,{loading:b,error:p,data:g}]=Object(x.useMutation)(x.gql`mutation ($data: ${c.gqlNames.updateInputName}!, $id: ID!) {
      item: ${c.gqlNames.updateMutationName}(id: $id, data: $data) {
        ${n}
      }
    }`,{errorPolicy:"all"});t=null!==(r=Object(s.useMemo)(()=>{if(g)return Object(y.d)(g,null===p||void 0===p?void 0:p.graphQLErrors).get("item")},[g,p]))&&void 0!==r?r:t;const[m,O]=Object(s.useState)(()=>({value:Object(y.b)(c.fields,t),item:t.data}));if(!b&&m.item!==t.data&&(t.errors||[]).every(e=>{var t;return 1!==(null===(t=e.path)||void 0===t?void 0:t.length)})){const e=Object(y.b)(c.fields,t);O({value:e,item:t.data})}const{changedFields:j,dataForUpdate:h}=Object(y.f)(c.fields,t,m.value),v=Object(y.g)(c.fields,m.value),[E,S]=Object(s.useState)(!1),R=Object(f.b)(),M=C(()=>{const e=0!==v.size;S(e),e||d({variables:{data:h,id:t.get("id").data}}).then(({errors:e})=>{const t=null===e||void 0===e?void 0:e.find(e=>{var t;return 1===(null===(t=e.path)||void 0===t?void 0:t.length)});t?R.addToast({title:"Failed to update item",tone:"negative",message:t.message}):R.addToast({tone:"positive",title:"Saved successfully"})}).catch(e=>{R.addToast({title:"Failed to update item",tone:"negative",message:e.message})})});return Object(u.n)(u.a,{marginTop:"xlarge"},Object(u.n)(k.a,{networkError:null===p||void 0===p?void 0:p.networkError,errors:null===p||void 0===p?void 0:p.graphQLErrors.filter(e=>{var t;return 1===(null===(t=e.path)||void 0===t?void 0:t.length)})}),Object(u.n)(y.a,{fieldModes:o,fields:c.fields,forceValidation:E,invalidFields:v,onChange:Object(s.useCallback)(e=>{O(t=>({item:t.item,value:e(t.value)}))},[O]),value:m.value}),Object(u.n)(P,{onSave:M,hasChangedFields:!!j.size,onReset:C(()=>{O({item:t.data,value:Object(y.b)(c.fields,t)})}),loading:b,deleteButton:Object(s.useMemo)(()=>{var e,n,o,r;return a?Object(u.n)(D,{list:c,itemLabel:null!==(e=null===(n=t.data)||void 0===n?void 0:n[c.labelField])&&void 0!==e?e:null===(o=t.data)||void 0===o?void 0:o.id,itemId:null===(r=t.data)||void 0===r?void 0:r.id}):void 0},[a,c,null===(i=t.data)||void 0===i?void 0:i[c.labelField],null===(l=t.data)||void 0===l?void 0:l.id])}))}function D({itemLabel:e,itemId:t,list:n}){const o=Object(f.b)(),[a,{loading:r}]=Object(x.useMutation)(x.gql`mutation ($id: ID!) {
      ${n.gqlNames.deleteMutationName}(id: $id) {
        id
      }
    }`,{variables:{id:t}}),[i,l]=Object(s.useState)(!1),b=Object(c.useRouter)();return Object(u.n)(s.Fragment,null,Object(u.n)(d.a,{tone:"negative",onClick:()=>{l(!0)}},"Delete"),Object(u.n)(O.a,{title:"Delete Confirmation",isOpen:i,tone:"negative",actions:{confirm:{label:"Delete",action:async()=>{await a().catch(e=>{o.addToast({title:"Failed to delete item",message:e.message,tone:"negative"})}),b.push("/"+n.path),o.addToast({title:e,message:"Deleted successfully",tone:"positive"})},loading:r},cancel:{label:"Cancel",action:()=>{l(!1)}}}},"Are you sure you want to delete ",Object(u.n)("strong",null,e),"?"))}const M=({listKey:e})=>{var t,n,a,i;const p=Object(c.useRouter)(),{id:O}=p.query,f=Object(w.c)(e),{palette:E,spacing:C,typography:D}=Object(u.t)(),{query:M,selectedFields:P}=Object(s.useMemo)(()=>{let e=Object.keys(f.fields).map(e=>f.fields[e].controller.graphqlSelection).join("\n");return{selectedFields:e,query:x.gql`
        query ItemPage($id: ID!, $listKey: String!) {
          item: ${f.gqlNames.itemQueryName}(where: {id: $id}) {
            ${e}
          }
          keystone {
            adminMeta {
              list(key: $listKey) {
                hideCreate
                hideDelete
                fields {
                  path
                  itemView(id: $id) {
                    fieldMode
                  }
                }
              }
            }
          }
        }
      `}},[f]);let{data:$,error:L,loading:T}=Object(x.useQuery)(M,{variables:{id:O,listKey:e},errorPolicy:"all",skip:void 0===O});T||(T=void 0===O);const q=Object(y.d)($,null===L||void 0===L?void 0:L.graphQLErrors);let z=Object(s.useMemo)(()=>{var e,t,n,o,a;let r={};return null===(e=q.data)||void 0===e||null===(t=e.keystone)||void 0===t||null===(n=t.adminMeta)||void 0===n||null===(o=n.list)||void 0===o||null===(a=o.fields)||void 0===a||a.forEach(e=>{var t;null!==e&&null!==e.path&&null!=(null===e||void 0===e||null===(t=e.itemView)||void 0===t?void 0:t.fieldMode)&&(r[e.path]=e.itemView.fieldMode)}),r},[null===(t=q.data)||void 0===t||null===(n=t.keystone)||void 0===n||null===(a=n.adminMeta)||void 0===a||null===(i=a.list)||void 0===i?void 0:i.fields]);const N=q.get("keystone").errors;return Object(u.n)(k.c,{header:Object(u.n)(S,{css:{alignItems:"center",display:"flex",flex:1,justifyContent:"space-between"}},Object(u.n)("div",{css:{alignItems:"center",display:"flex",flex:1,minWidth:0}},Object(u.n)(u.g,{type:"h3"},Object(u.n)(l.a,{href:"/"+f.path,passHref:!0},Object(u.n)("a",{css:{textDecoration:"none"}},f.label))),Object(u.n)("div",{css:{color:E.neutral500,marginLeft:C.xsmall,marginRight:C.xsmall}},Object(u.n)(m.a,null)),Object(u.n)(u.g,{as:"h1",type:"h3",css:{minWidth:0,maxWidth:"100%",overflow:"hidden",flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap"}},T?"Loading...":$&&$.item&&($.item[f.labelField]||$.item.id)||O)),!1)},T?Object(u.n)(u.b,{css:{height:`calc(100vh - ${k.b}px)`}},Object(u.n)(b.a,{label:"Loading item data",size:"large",tone:"passive"})):N?Object(u.n)(u.a,{marginY:"xlarge"},Object(u.n)(j.a,{tone:"negative"},N[0].message)):Object(u.n)(s.Fragment,null,Object(u.n)(F,null,Object(u.n)(R,{fieldModes:z,selectedFields:P,showDelete:!$.keystone.adminMeta.list.hideDelete,listKey:e,itemGetter:q.get("item")}),Object(u.n)(I,null,Object(u.n)(v.d,null,"Item ID"),Object(u.n)("div",{css:{display:"flex",alignItems:"center"}},Object(u.n)(v.i,{css:{marginRight:C.medium,fontFamily:D.fontFamily.monospace,fontSize:D.fontSize.small},readOnly:!0,value:$.item.id}),Object(u.n)(h.a,{content:"Copy ID"},e=>Object(u.n)(d.a,Object(o.a)({},e,{"aria-label":"Copy ID",onClick:()=>{r()($.item.id)}}),Object(u.n)(g,{size:"small"}))))))))},P=Object(s.memo)((function({hasChangedFields:e,loading:t,onSave:n,onReset:o,deleteButton:a}){const{colors:r,spacing:i}=Object(u.t)();return Object(u.n)("div",{css:{background:r.background,borderTop:"1px solid "+r.border,bottom:0,display:"flex",justifyContent:"space-between",marginTop:i.xlarge,paddingBottom:i.xlarge,paddingTop:i.xlarge,position:"sticky",zIndex:10}},Object(u.n)(u.j,{align:"center",across:!0,gap:"small"},Object(u.n)(d.a,{isDisabled:!e,isLoading:t,weight:"bold",tone:"active",onClick:n},"Save changes"),e?Object(u.n)(d.a,{weight:"none",onClick:o},"Reset changes"):Object(u.n)(u.k,{weight:"medium",paddingX:"large",color:"neutral600"},"No changes")),a)})),F=e=>{const{spacing:t}=Object(u.t)();return Object(u.n)(S,{css:{position:"relative"}},Object(u.n)("div",Object(o.a)({css:{alignItems:"start",display:"grid",gap:t.xlarge,gridTemplateColumns:"2fr 1fr"}},e)))},I=e=>{const{spacing:t}=Object(u.t)();return Object(u.n)("div",Object(o.a)({css:{marginTop:t.xlarge,marginBottom:t.xxlarge,position:"sticky",top:t.xlarge}},e))}},rjhH:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("J8OT"),a=n("rkyN"),r=n("ERkP"),i=n("x8tt");const l=i.gql`
  mutation EndSession {
    endSession
  }
`,c=({children:e})=>{const[t,{loading:n,data:c}]=Object(i.useMutation)(l);return Object(r.useEffect)(()=>{null!==c&&void 0!==c&&c.endSession&&window.location.reload()},[c]),Object(o.n)(a.a,{size:"small",isLoading:n,onClick:()=>t()},e||"Sign out")}},yiKp:function(e,t,n){var o=n("KEM+");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);